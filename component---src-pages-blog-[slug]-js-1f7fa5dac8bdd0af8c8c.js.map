{"version":3,"file":"component---src-pages-blog-[slug]-js-1f7fa5dac8bdd0af8c8c.js","mappings":"2QAyFO,MAAMA,EAAOC,IAAiB,IAAhB,OAAEC,GAAQD,EAC7B,MAAM,cAAEE,IAAkBC,EAAAA,EAAAA,KAEpBC,EAAYF,EAAcD,EAAOI,MAEvC,OAAOC,EAAAA,cAAA,aAAQF,aAAS,EAATA,EAAWG,MAAM,sBAA2B,EAG7D,SAASC,EAAYC,GAAmB,IAAlB,YAAEC,GAAaD,EACnC,OACEH,EAAAA,cAAA,YACGI,EAAYC,KAAI,CAACC,EAASC,IAEvBP,EAAAA,cAAA,QAAMQ,IAAKF,EAAQG,MACV,IAANF,GAAW,KACZP,EAAAA,cAAA,KAAGU,KAAM,iBAAiBJ,EAAQG,OAAQE,UAAU,aACjDL,EAAQM,KAAKC,WAO5B,CAEA,UAvGA,SAAiBC,GAAc,IAAb,OAAEnB,GAAQmB,EAC1B,MAAM,cAAEC,IAAkBC,EAAAA,EAAAA,MACpB,SAAEC,IAAaC,EAAAA,EAAAA,MACf,cAAEtB,IAAkBC,EAAAA,EAAAA,KAEpBC,EAAYF,EAAcD,EAAOI,OAEjC,YAAEK,IAAgBe,EAAAA,EAAAA,GAAarB,aAAS,EAATA,EAAWsB,WAEhD,IAAKtB,EAIH,YAHsB,oBAAXuB,SACTC,EAAAA,EAAAA,UAAS,OAAQ,CAAEC,SAAS,KAKhC,MAAMC,EAAgBT,EAAcjB,EAAU2B,QACxCC,EAAmBF,EAAcG,OAAS,EAE1CC,EAAqB,CACzBC,EAAAA,CAAGC,GACD,MAAM,KAAEC,KAASC,GAASF,EAC1B,OAAO9B,EAAAA,cAAA,KAAAiC,OAAAC,OAAA,CAAIvB,UAAU,0BAA6BqB,GACpD,EACAG,CAAAA,CAAEL,GACA,MAAM,KAAEC,KAASC,GAASF,EAC1B,OAAO9B,EAAAA,cAAA,IAAAiC,OAAAC,OAAA,CAAGvB,UAAU,QAAWqB,GACjC,EACAI,EAAAA,CAAGN,GACD,MAAM,KAAEC,KAASC,GAASF,EAC1B,OAAO9B,EAAAA,cAAA,KAAAiC,OAAAC,OAAA,CAAIvB,UAAU,gBAAmBqB,GAC1C,GAGF,OACEhC,EAAAA,cAACqC,EAAAA,EAAI,CACHpC,MAAOH,EAAUG,MACjBqC,SACEtC,EAAAA,cAAAA,EAAAA,SAAA,KACEA,EAAAA,cAACE,EAAY,CAACE,YAAaA,IAC1B,MAAMa,EAASnB,EAAUyC,sBAI9BvC,EAAAA,cAACwC,EAAAA,EAAO,CAAC7B,UAAU,wBACjBX,EAAAA,cAAA,OAAKW,UAAU,uBACbX,EAAAA,cAAA,OAAKW,UAAWe,EAAmB,iBAAce,GAC/CzC,EAAAA,cAAC0C,EAAAA,EAAQ,CAACC,WAAYf,GACnB9B,EAAU8C,UAGdlB,GACC1B,EAAAA,cAAA,OAAKW,UAAU,2BACbX,EAAAA,cAAA,MAAIW,UAAU,iFAAgF,kBAG7Fa,EAAcnB,KAAKwC,GAClB7C,EAAAA,cAAC8C,EAAAA,EAAW,CACVtC,IAAK,GAAGqC,EAAME,MAAMjD,EAAUiD,KAC9B9C,MAAO4C,EAAM5C,MACb+C,MAAOH,EAAMI,SAAStB,OACtBuB,WACEL,EAAMM,SACFN,EAAMI,SAASJ,EAAMM,UACrBN,EAAMI,SAAS,GAErBlD,KAAM8C,EAAM9C,KACZqD,QAASP,EAAME,UASjC,C","sources":["webpack://barney-s-travels/./src/pages/blog/[slug].js"],"sourcesContent":["import React from 'react';\nimport Page from '../../components/Page';\nimport Section from '../../components/Section';\nimport useBlogs from '../../hooks/useBlogs';\nimport Markdown from 'react-markdown';\nimport useCountries from '../../hooks/useCountries';\nimport useDates from '../../hooks/useDates';\nimport useAlbums from '../../hooks/useAlbums';\nimport GalleryItem from '../../components/GalleryItem';\nimport { navigate } from 'gatsby';\n\nfunction BlogPost({ params }) {\n  const { getAlbumsById } = useAlbums();\n  const { ymdToDmy } = useDates();\n  const { getPostBySlug } = useBlogs();\n\n  const foundPost = getPostBySlug(params.slug);\n\n  const { countryData } = useCountries(foundPost?.countries);\n\n  if (!foundPost) {\n    if (typeof window !== 'undefined') {\n      navigate('/404', { replace: true });\n    }\n    return;\n  }\n\n  const relatedAlbums = getAlbumsById(foundPost.albums);\n  const hasRelatedAlbums = relatedAlbums.length > 0;\n\n  const markdownFormatting = {\n    h2(props) {\n      const { node, ...rest } = props;\n      return <h2 className=\"font-bold text-lg mb-1\" {...rest} />; // eslint-disable-line\n    },\n    p(props) {\n      const { node, ...rest } = props;\n      return <p className=\"mb-4\" {...rest} />;\n    },\n    li(props) {\n      const { node, ...rest } = props;\n      return <li className=\"list-decimal\" {...rest} />;\n    },\n  };\n\n  return (\n    <Page\n      title={foundPost.title}\n      subtitle={\n        <>\n          <CountryLinks countryData={countryData} />\n          {` â€¢ ${ymdToDmy(foundPost.publication_date)}`}\n        </>\n      }\n    >\n      <Section className=\"py-6 max-w-screen-lg\">\n        <div className=\"flex flex-row gap-8\">\n          <div className={hasRelatedAlbums ? 'basis-2/3' : undefined}>\n            <Markdown components={markdownFormatting}>\n              {foundPost.content}\n            </Markdown>\n          </div>\n          {hasRelatedAlbums && (\n            <div className=\"flex flex-col flex-grow\">\n              <h2 className=\"text-2xl font-light bg-slate-50 border-solid border-b-4 px-3 py-2 text-center\">\n                Related albums\n              </h2>\n              {relatedAlbums.map((album) => (\n                <GalleryItem\n                  key={`${album.id}_${foundPost.id}`}\n                  title={album.title}\n                  count={album.pictures.length}\n                  background={\n                    album.featured\n                      ? album.pictures[album.featured]\n                      : album.pictures[0]\n                  }\n                  slug={album.slug}\n                  albumId={album.id}\n                />\n              ))}\n            </div>\n          )}\n        </div>\n      </Section>\n    </Page>\n  );\n}\n\nexport const Head = ({ params }) => {\n  const { getPostBySlug } = useBlogs();\n\n  const foundPost = getPostBySlug(params.slug);\n\n  return <title>{foundPost?.title} - Barney's Travels</title>;\n};\n\nfunction CountryLinks({ countryData }) {\n  return (\n    <span>\n      {countryData.map((country, i) => {\n        return (\n          <span key={country.ccn3}>\n            {i !== 0 && ', '}\n            <a href={`/blog?country=${country.ccn3}`} className=\"underline\">\n              {country.name.common}\n            </a>\n          </span>\n        );\n      })}\n    </span>\n  );\n}\n\nexport default BlogPost;\n"],"names":["Head","_ref2","params","getPostBySlug","useBlogs","foundPost","slug","React","title","CountryLinks","_ref3","countryData","map","country","i","key","ccn3","href","className","name","common","_ref","getAlbumsById","useAlbums","ymdToDmy","useDates","useCountries","countries","window","navigate","replace","relatedAlbums","albums","hasRelatedAlbums","length","markdownFormatting","h2","props","node","rest","Object","assign","p","li","Page","subtitle","publication_date","Section","undefined","Markdown","components","content","album","GalleryItem","id","count","pictures","background","featured","albumId"],"sourceRoot":""}