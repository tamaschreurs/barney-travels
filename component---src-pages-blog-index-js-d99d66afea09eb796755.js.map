{"version":3,"file":"component---src-pages-blog-index-js-d99d66afea09eb796755.js","mappings":"iTAsFA,MA7EiBA,IAQV,IARW,MAChBC,EAAK,KACLC,EAAI,QACJC,EAAO,UACPC,EAAS,SACTC,EAAQ,GACRC,EAAE,gBACFC,GACDP,EACC,MAAM,EAACQ,EAAa,EAACC,IAAmBC,EAAAA,EAAAA,WAAS,IAE3C,cAAEC,IAAkBC,EAAAA,EAAAA,MACpB,SAAEC,IAAaC,EAAAA,EAAAA,MACbC,WAAYC,IAAiBC,EAAAA,EAAAA,GAAab,GAE5Cc,EAAgBP,EAAcN,GAEpC,IAAIc,EAAkBD,EAClBE,GAAc,EAEdF,EAAcG,OAAS,IACzBD,GAAc,EACTZ,IACHW,EAAkBD,EAAcI,MAAM,EAAG,KAI7C,MAAMC,EAAmBJ,EAAgBK,KAAKC,GAC5CC,EAAAA,cAAA,OAAKC,UAAU,uBAAuBC,IAAK,GAAGH,EAAMnB,MAAMA,KACxDoB,EAAAA,cAACG,EAAAA,EAAW,CACV5B,MAAOwB,EAAMxB,MACb6B,WACEL,EAAMM,SAAWN,EAAMO,SAASP,EAAMM,UAAYN,EAAMO,SAAS,GAEnE9B,KAAMuB,EAAMvB,KACZ+B,QAASR,EAAMnB,GACf4B,MAAI,OAKV,OACER,EAAAA,cAAA,OAAKC,UAAU,iEACbD,EAAAA,cAAA,OACEC,UAAWQ,IACT,CAAE,aAAcjB,EAAcG,OAAS,GACvC,SAGFK,EAAAA,cAACU,EAAAA,KAAI,CAACC,GAAInC,GACRwB,EAAAA,cAAA,MAAIC,UAAU,2BAA2B1B,IAE3CyB,EAAAA,cAAA,OAAKC,UAAU,4BACZX,EAAa,MAAIH,EAASN,IAE7BmB,EAAAA,cAACY,EAAAA,EAAQ,CAACX,UAAU,gBAAgBxB,IAEtCuB,EAAAA,cAAA,OAAKC,UAAU,2CACZJ,EACAH,IAAgBZ,GACfkB,EAAAA,cAAA,UACEa,KAAK,SACLZ,UAAU,oDACVa,QAASA,KACP/B,GAAiBD,EAAa,GAGhCkB,EAAAA,cAAA,OAAKC,UAAU,uIACbD,EAAAA,cAAA,WAAK,IAAER,EAAcG,OAAS,MAKlC,ECtDV,MAxBA,SAAiBrB,GAAiB,IAAhB,UAAEyC,GAAWzC,EAC7B,OACE0B,EAAAA,cAACgB,EAAAA,EAAO,KACNhB,EAAAA,cAAA,OAAKC,UAAU,sBACZc,EAAUjB,KAAKmB,IACdC,QAAQC,IAAIF,EAAKrC,IAEfoB,EAAAA,cAACoB,EAAQ,CACPlB,IAAKe,EAAKrC,GACVA,GAAIqC,EAAKrC,GACTL,MAAO0C,EAAK1C,MACZC,KAAMyC,EAAKzC,KACXC,QAASwC,EAAKI,QACd1C,SAAUsC,EAAKK,OACf5C,UAAWuC,EAAKvC,UAChBG,gBAAiBoC,EAAKM,uBAOpC,E,UCOA,MA3BA,SAAiBjD,GAAgB,IAAf,SAAEkD,GAAUlD,EAC5B,MAAM,UAAEyC,EAAS,oBAAEU,IAAwBC,EAAAA,EAAAA,KAGrCC,EADe,IAAIC,gBAAgBJ,EAASK,QAChBC,IAAI,WAEtC,IAAIC,EAAgBhB,EAChBiB,EAAe,GAEfL,IACFK,EAAeL,EAAaM,MAAM,KAClCF,EAAgBN,EAAoBO,IAGtC,MAAQ3C,WAAYC,IAAiBC,EAAAA,EAAAA,GAAayC,GAElD,OACEhC,EAAAA,cAACkC,EAAAA,EAAI,CACH3D,MACEyD,EAAarC,OAAS,EAAI,eAAeL,IAAiB,gBAG5DU,EAAAA,cAACmC,EAAQ,CAACpB,UAAWgB,IAG3B,EAIO,MAAMK,EAAOA,IAAMpC,EAAAA,cAAA,aAAO,0B","sources":["webpack://barney-s-travels/./src/components/BlogItem.jsx","webpack://barney-s-travels/./src/components/BlogList.jsx","webpack://barney-s-travels/./src/pages/blog/index.js"],"sourcesContent":["import React, { useState } from 'react';\nimport useAlbums from '../hooks/useAlbums';\nimport GalleryItem from './GalleryItem';\nimport classNames from 'classnames';\nimport useDates from '../hooks/useDates';\nimport useCountries from '../hooks/useCountries';\nimport Markdown from 'react-markdown';\nimport { Link } from 'gatsby';\n\nconst BlogItem = ({\n  title,\n  slug,\n  summary,\n  countries,\n  albumIds,\n  id,\n  publicationDate,\n}) => {\n  const [showOverflow, setShowOverflow] = useState(false);\n\n  const { getAlbumsById } = useAlbums();\n  const { ymdToDmy } = useDates();\n  const { nameString: countryNames } = useCountries(countries);\n\n  const relatedAlbums = getAlbumsById(albumIds);\n\n  let displayedAlbums = relatedAlbums;\n  let hasOverflow = false;\n\n  if (relatedAlbums.length > 2) {\n    hasOverflow = true;\n    if (!showOverflow) {\n      displayedAlbums = relatedAlbums.slice(0, 1);\n    }\n  }\n\n  const relatedGalleries = displayedAlbums.map((album) => (\n    <div className=\"flex-grow basis-5/12\" key={`${album.id}_${id}`}>\n      <GalleryItem\n        title={album.title}\n        background={\n          album.featured ? album.pictures[album.featured] : album.pictures[0]\n        }\n        slug={album.slug}\n        albumId={album.id}\n        mini\n      />\n    </div>\n  ));\n\n  return (\n    <div className=\"flex flex-row space-between border-solid border-b-2 mb-6 py-2\">\n      <div\n        className={classNames(\n          { 'basis-8/12': relatedAlbums.length > 0 },\n          'pr-4'\n        )}\n      >\n        <Link to={slug}>\n          <h2 className=\"text-2xl mb-2 underline\">{title}</h2>\n        </Link>\n        <div className=\"font-medium text-sm pb-1\">\n          {countryNames} â€¢ {ymdToDmy(publicationDate)}\n        </div>\n        <Markdown className=\"line-clamp-4\">{summary}</Markdown>\n      </div>\n      <div className=\"flex flex-row flex-wrap flex-grow gap-2\">\n        {relatedGalleries}\n        {hasOverflow && !showOverflow && (\n          <button\n            type=\"button\"\n            className=\"flex flex-col justify-center h-40 bg-gray-200 p-6\"\n            onClick={() => {\n              setShowOverflow(!showOverflow);\n            }}\n          >\n            <div className=\"bg-gray-400 p-3 rounded-full text-white text-2xl font-light text-center min-w-14 min-h-14 flex flex-col justify-center align-middle\">\n              <div>+{relatedAlbums.length - 1}</div>\n            </div>\n          </button>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default BlogItem;\n","import React from 'react';\nimport Section from './Section';\nimport BlogItem from './BlogItem';\n\nfunction BlogList({ blogPosts }) {\n  return (\n    <Section>\n      <div className=\"flex flex-col py-8\">\n        {blogPosts.map((post) => {\n          console.log(post.id);\n          return (\n            <BlogItem\n              key={post.id}\n              id={post.id}\n              title={post.title}\n              slug={post.slug}\n              summary={post.content}\n              albumIds={post.albums}\n              countries={post.countries}\n              publicationDate={post.publication_date}\n            />\n          );\n        })}\n      </div>\n    </Section>\n  );\n}\n\nexport default BlogList;\n","import React from 'react';\nimport Page from '../../components/Page';\nimport BlogList from '../../components/BlogList';\nimport useBlogs from '../../hooks/useBlogs';\nimport useCountries from '../../hooks/useCountries';\n\nfunction BlogPage({ location }) {\n  const { blogPosts, getPostsByCountries } = useBlogs();\n\n  const searchParams = new URLSearchParams(location.search);\n  const countryParam = searchParams.get('country');\n\n  let filteredPosts = blogPosts;\n  let countryArray = [];\n\n  if (countryParam) {\n    countryArray = countryParam.split(',');\n    filteredPosts = getPostsByCountries(countryArray);\n  }\n\n  const { nameString: countryNames } = useCountries(countryArray);\n\n  return (\n    <Page\n      title={\n        countryArray.length > 0 ? `Posts from: ${countryNames}` : 'Recent Posts'\n      }\n    >\n      <BlogList blogPosts={filteredPosts} />\n    </Page>\n  );\n}\n\nexport default BlogPage;\n\nexport const Head = () => <title>Blog - Barney's Travels</title>;\n"],"names":["_ref","title","slug","summary","countries","albumIds","id","publicationDate","showOverflow","setShowOverflow","useState","getAlbumsById","useAlbums","ymdToDmy","useDates","nameString","countryNames","useCountries","relatedAlbums","displayedAlbums","hasOverflow","length","slice","relatedGalleries","map","album","React","className","key","GalleryItem","background","featured","pictures","albumId","mini","classNames","Link","to","Markdown","type","onClick","blogPosts","Section","post","console","log","BlogItem","content","albums","publication_date","location","getPostsByCountries","useBlogs","countryParam","URLSearchParams","search","get","filteredPosts","countryArray","split","Page","BlogList","Head"],"sourceRoot":""}